/**
 * Parvus
 *
 * @author de Oostfreese
 * @version 1.3.0
 * @url https://github.com/deoostfreese/parvus
 *
 * MIT license
 */
function t(e){const n=window,i=["button:not([disabled]):not([inert])",'[tabindex]:not([tabindex^="-"]):not([inert])'],a={gallery:[],slider:null,sliderElements:[],elementsLength:0,currentIndex:0,x:0},s={};let r,o,l,d,c=null,u=null,p={},h=null,m=null,g=0,v=null,f=null,b={},y=!1,E=!1,L=null,A=null,w=null,x=!0;const C=window.matchMedia("(prefers-reduced-motion)"),_=function(){C.matches?(x=!0,w=p.reducedTransitionDuration):(x=!1,w=p.transitionDuration)};C.addEventListener("change",_);const I=function(t){p=function(t){return{selector:".lightbox",docClose:!0,scrollClose:!1,swipeClose:!0,threshold:100,transitionDuration:300,reducedTransitionDuration:1,transitionTimingFunction:"cubic-bezier(0.2, 0, 0.2, 1)",lightboxIndicatorIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3"/></svg>',closeButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M18 6L6 18M6 6l12 12"/></svg>',lang:"en",i18n:{en:{lightboxLabel:"This is a dialog window which overlays the main content of the page. The modal shows the enlarged image. Pressing the Escape key will close the modal and bring you back to where you were on the page.",lightboxLoadingIndicatorLabel:"Image loading",closeButtonLabel:"Close dialog window"}},fileTypes:/\.(png|jpe?g|gif|bmp|webp|svg)(\?.*)?$/i,...t}}(t),_(),h||S();document.querySelectorAll(p.selector).forEach((t=>{$(t)}))},T=function(t){return t.hasAttribute("data-group")?t.getAttribute("data-group"):"default"},$=function(t){var e;if("A"===t.tagName&&t.hasAttribute("href")&&t.href.match(p.fileTypes)||"BUTTON"===t.tagName&&t.hasAttribute("data-target")&&t.getAttribute("data-target").match(p.fileTypes))if(c=T(t),Object.prototype.hasOwnProperty.call(s,c)||(s[c]=(e=a,JSON.parse(JSON.stringify(e))),q()),-1===s[c].gallery.indexOf(t)){if(s[c].gallery.push(t),s[c].elementsLength++,null!==t.querySelector("img")){t.classList.add("parvus-zoom");const e=document.createElement("div");e.className="parvus-zoom__indicator",e.innerHTML=p.lightboxIndicatorIcon,t.appendChild(e)}t.classList.add("parvus-trigger"),t.addEventListener("click",U),D(t)}else console.log("Ups, element already added.");else console.log(t,`Use a link with the 'href' attribute or a button with the 'data-target' attribute. Both attributes must have a path to the image file. Supported image file types: ${p.fileTypes}.`)},N=function(t){t.classList.contains("parvus-zoom")&&(t.classList.remove("parvus-zoom"),t.removeEventListener("click",U))},S=function(){h=document.createElement("div"),h.setAttribute("role","dialog"),h.setAttribute("aria-modal","true"),h.setAttribute("aria-hidden","true"),h.setAttribute("tabindex","-1"),h.setAttribute("aria-label",p.i18n[p.lang].lightboxLabel),h.classList.add("parvus"),m=document.createElement("div"),m.classList.add("parvus__overlay"),m.style.opacity=0,h.appendChild(m),f=document.createElement("button"),f.className="parvus__btn parvus__btn--close",f.setAttribute("type","button"),f.setAttribute("aria-label",p.i18n[p.lang].closeButtonLabel),f.innerHTML=p.closeButtonIcon,h.appendChild(f),document.body.appendChild(h)},q=function(){s[c].slider=document.createElement("div"),s[c].slider.className="parvus__slider",s[c].slider.setAttribute("aria-hidden","true"),h.appendChild(s[c].slider)},D=function(t){const e=document.createElement("div"),n=document.createElement("div");e.className="parvus__slide",e.style.position="absolute",e.style.left=100*s[c].x+"%",e.setAttribute("aria-hidden","true"),B(t,n),e.appendChild(n),s[c].slider.appendChild(e),s[c].sliderElements.push(e),++s[c].x},M=function(t){if(et())throw new Error("Ups, I'm aleady open.");L=document.activeElement;const e=window.location.href;history.pushState({parvus:"close"},"Image",e),s[u].currentIndex=t,Z();document.querySelectorAll('body > *:not([aria-hidden="true"])').forEach((t=>{t.setAttribute("aria-hidden","true"),t.classList.add("parvus-hidden")})),h.classList.add("parvus--is-opening"),h.setAttribute("aria-hidden","false"),W(),requestAnimationFrame((()=>{m.style.opacity=1,m.style.transition=`opacity ${w}ms ${p.transitionTimingFunction}`})),m.addEventListener("transitionend",(()=>{h.classList.remove("parvus--is-opening")}),{once:!0}),s[u].slider.setAttribute("aria-hidden","false"),k(s[u].currentIndex),H(),F(s[u].currentIndex),Y(s[u].currentIndex+1),Y(s[u].currentIndex-1);const n=new CustomEvent("open");h.dispatchEvent(n)},O=function(){if(!et())throw new Error("Ups, I'm already closed.");tt(),P(),null!==history.state&&"close"===history.state.parvus&&history.back();const t=new CustomEvent("close");h.dispatchEvent(t);document.querySelectorAll(".parvus-hidden").forEach((t=>{t.removeAttribute("aria-hidden"),t.classList.remove("parvus-hidden")})),h.classList.add("parvus--is-closing"),requestAnimationFrame((()=>{m.style.opacity=0,m.style.transition=`opacity ${w}ms ${p.transitionTimingFunction}`})),m.addEventListener("transitionend",(()=>{z(s[u].currentIndex),L.focus({preventScroll:!0}),h.classList.remove("parvus--is-closing"),s[u].slider.setAttribute("aria-hidden","true"),h.setAttribute("aria-hidden","true")}),{once:!0})},Y=function(t){s[u].sliderElements[t]},k=function(t){void 0!==s[u].sliderElements[t]&&(s[u].sliderElements[t].classList.add("parvus__slide--is-active"),s[u].sliderElements[t].setAttribute("aria-hidden","false"))},B=function(t,e){const n=document.createElement("figure"),i=document.createElement("figurecaption"),a=t.querySelector("img");v=document.createElement("img"),"A"===t.tagName?(v.setAttribute("data-src",t.href),v.alt=a?a.alt||"":t.getAttribute("data-alt")||""):(v.alt=t.getAttribute("data-alt")||"",v.setAttribute("data-src",t.getAttribute("data-target"))),n.appendChild(v),t.hasAttribute("data-caption")&&""!==t.getAttribute("data-caption")&&(i.innerHTML=t.getAttribute("data-caption"),n.appendChild(i)),e.appendChild(n)},F=function(t){const e=s[u].sliderElements[t],n=e.querySelector("img"),i=s[u].gallery[t],a=i.getBoundingClientRect(),c=document.createElement("div");console.log(i),n.hasAttribute("data-src")&&(n.style.opacity=0,c.className="parvus__loader",c.setAttribute("role","progressbar"),c.setAttribute("aria-label",p.i18n[p.lang].lightboxLOADING_INDICATORLabel),e.appendChild(c),n.onload=()=>{const t=n.getBoundingClientRect();e.removeChild(c),r=a.width/t.width,o=a.height/t.height,l=a.left-t.left,d=a.top-t.top,n.setAttribute("width",n.naturalWidth),n.setAttribute("height",n.naturalHeight),requestAnimationFrame((()=>{n.style.transform=`translate(${l}px, ${d}px) scale(${r}, ${o})`,n.style.transition="transform 0s, opacity 0s",requestAnimationFrame((()=>{n.style.transform="",n.style.opacity=1,n.style.transition=`transform ${w}ms ${p.transitionTimingFunction}, opacity ${w}ms ${p.transitionTimingFunction}`}))}))},n.setAttribute("src",n.getAttribute("data-src")),n.removeAttribute("data-src"))},z=function(t){void 0!==s[u].sliderElements[t]&&(s[u].sliderElements[t].classList.remove("parvus__slide--is-active"),s[u].sliderElements[t].setAttribute("aria-hidden","true"))},H=function(){u=null!==u?u:c,A=-s[u].currentIndex*h.offsetWidth,s[u].slider.style.transform=`translate3d(${A}px, 0, 0)`},P=function(){m.style.opacity=1,s[u].slider.style.transform="translate3d(0, 0, 0)",h.classList.remove("parvus--is-closing"),b={startY:0,endY:0}},U=function(t){t.preventDefault(),u=T(this),M(s[u].gallery.indexOf(this))},R=function(t){(t.target===f||!y&&t.target.classList.contains("parvus__overlay")&&p.docClose)&&O(),t.stopPropagation()},j=function(){return Array.prototype.slice.call(h.querySelectorAll(`${i.join(", ")}`)).filter((function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}))},W=function(){j()[0].focus()},J=function(t){const e=j(),n=e.indexOf(document.activeElement);"Tab"===t.code?t.shiftKey&&0===n?(e[e.length-1].focus(),t.preventDefault()):t.shiftKey||n!==e.length-1||(e[0].focus(),t.preventDefault()):"Escape"===t.code&&(t.preventDefault(),O())},K=function(){O()},G=function(t){t.stopPropagation(),y=!1,E=!0,b.startY=t.touches[0].pageY,s[u].slider.classList.add("parvus__image--is-dragging")},V=function(t){t.stopPropagation(),E&&(t.preventDefault(),b.endY=t.touches[0].pageY,X())},Q=function(t){t.stopPropagation(),E=!1,s[u].slider.classList.remove("parvus__image--is-dragging"),b.endY&&function(){const t=b.endY-b.startY;Math.abs(t)>p.threshold&&p.swipeClose&&O()}(),P()},X=function(){if(p.swipeClose&&!x){const t=b.endY-b.startY,e=Math.abs(t);e<=100&&(g=1-e/100),h.classList.add("parvus--is-closing"),m.style.opacity=g,s[u].slider.style.transform=`translate3d(0, ${Math.round(t)}px, 0)`,y=!0}},Z=function(){n.addEventListener("keydown",J),p.scrollClose&&n.addEventListener("wheel",K),n.addEventListener("popstate",O),h.addEventListener("click",R),nt()&&(h.addEventListener("touchstart",G),h.addEventListener("touchmove",V),h.addEventListener("touchend",Q))},tt=function(){n.removeEventListener("keydown",J),p.scrollClose&&n.removeEventListener("wheel",K),n.removeEventListener("popstate",O),h.removeEventListener("click",R),nt()&&(h.removeEventListener("touchstart",G),h.removeEventListener("touchmove",V),h.removeEventListener("touchend",Q))},et=function(){return"false"===h.getAttribute("aria-hidden")},nt=function(){return"ontouchstart"in window};return I(e),t.init=I,t.open=M,t.close=O,t.add=$,t.remove=N,t.destroy=function(){et()&&O();document.querySelectorAll(".parvus-zoom").forEach((t=>{N(t)}));const t=new CustomEvent("destroy");h.dispatchEvent(t)},t.isOpen=et,t.on=function(t,e){h.addEventListener(t,e)},t.off=function(t,e){h.removeEventListener(t,e)},t}export default t;

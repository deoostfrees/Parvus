/**
 * Parvus
 *
 * @author de Oostfreese
 * @version 1.3.0
 * @url https://github.com/deoostfreese/parvus
 *
 * MIT license
 */
function e(t){const n=window,s=["button:not([disabled]):not([inert])",'[tabindex]:not([tabindex^="-"]):not([inert])'],i={gallery:[],slider:null,sliderElements:[],elementsLength:0,currentIndex:0,x:0},a={};let r,o,l,d,u=null,c=null,p={},h=null,m=null,v=0,g=null,f=null,b=null,y=null,L={},E=!1,w=!1,A=!1,x=null,_=null,I=null,C=null,T=!0;const B=window.matchMedia("(prefers-reduced-motion)"),M=function(){B.matches?(T=!0,C=p.reducedTransitionDuration):(T=!1,C=p.transitionDuration)};B.addEventListener("change",M);const $=function(e){p=function(e){return{selector:".lightbox",docClose:!0,scrollClose:!1,swipeClose:!0,threshold:100,transitionDuration:300,reducedTransitionDuration:.1,transitionTimingFunction:"cubic-bezier(0.2, 0, 0.2, 1)",lightboxIndicatorIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3"/></svg>',previousButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18" /></svg>',nextButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="9 6 15 12 9 18" /></svg>',closeButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M18 6L6 18M6 6l12 12"/></svg>',lang:"en",i18n:{en:{lightboxLabel:"This is a dialog window which overlays the main content of the page. The modal shows the enlarged image. Pressing the Escape key will close the modal and bring you back to where you were on the page.",lightboxLoadingIndicatorLabel:"Image loading",previousButtonLabel:"Previous image",nextButtonLabel:"Next image",closeButtonLabel:"Close dialog window"}},fileTypes:/\.(png|jpe?g|webp|avif|svg)(\?.*)?$/i,...e}}(e),M(),h||D();document.querySelectorAll(p.selector).forEach((e=>{X(e)}))},N=function(e){return e.hasAttribute("data-group")?e.getAttribute("data-group"):"default"},X=function(e){var t;if("A"===e.tagName&&e.hasAttribute("href")&&e.href.match(p.fileTypes)||"BUTTON"===e.tagName&&e.hasAttribute("data-target")&&e.getAttribute("data-target").match(p.fileTypes))if(u=N(e),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=(t=i,JSON.parse(JSON.stringify(t))),S()),-1===a[u].gallery.indexOf(e)){if(a[u].gallery.push(e),a[u].elementsLength++,null!==e.querySelector("img")){e.classList.add("parvus-zoom");const t=document.createElement("div");t.className="parvus-zoom__indicator",t.innerHTML=p.lightboxIndicatorIcon,e.appendChild(t)}e.classList.add("parvus-trigger"),e.addEventListener("click",V),k(e),pe()&&u===c&&G()}else console.log("Ups, element already added.");else console.log(e,`Use a link with the 'href' attribute or a button with the 'data-target' attribute. Both attributes must have a path to the image file. Supported image file types: ${p.fileTypes}.`)},Y=function(e){e.classList.contains("parvus-zoom")&&(e.classList.remove("parvus-zoom"),e.removeEventListener("click",V))},D=function(){h=document.createElement("div"),h.setAttribute("role","dialog"),h.setAttribute("aria-modal","true"),h.setAttribute("aria-hidden","true"),h.setAttribute("tabindex","-1"),h.setAttribute("aria-label",p.i18n[p.lang].lightboxLabel),h.classList.add("parvus"),m=document.createElement("div"),m.classList.add("parvus__overlay"),m.style.opacity=0,h.appendChild(m),y=document.createElement("button"),y.className="parvus__btn parvus__btn--close",y.setAttribute("type","button"),y.setAttribute("aria-label",p.i18n[p.lang].closeButtonLabel),y.innerHTML=p.closeButtonIcon,h.appendChild(y),f=document.createElement("button"),f.className="parvus__btn parvus__btn--previous",f.setAttribute("type","button"),f.setAttribute("aria-label",p.i18n[p.lang].previousButtonLabel),f.innerHTML=p.previousButtonIcon,h.appendChild(f),b=document.createElement("button"),b.className="parvus__btn parvus__btn--next",b.setAttribute("type","button"),b.setAttribute("aria-label",p.i18n[p.lang].nextButtonLabel),b.innerHTML=p.nextButtonIcon,h.appendChild(b),document.body.appendChild(h)},S=function(){a[u].slider=document.createElement("div"),a[u].slider.className="parvus__slider",a[u].slider.setAttribute("aria-hidden","true"),h.appendChild(a[u].slider)},k=function(e){const t=document.createElement("div"),n=document.createElement("div");t.className="parvus__slide",t.style.position="absolute",t.style.left=100*a[u].x+"%",t.setAttribute("aria-hidden","true"),P(e,n),t.appendChild(n),a[u].slider.appendChild(t),a[u].sliderElements.push(t),++a[u].x},q=function(e){if(pe())throw new Error("Ups, I'm aleady open.");G(),x=document.activeElement;const t=window.location.href;history.pushState({parvus:"close"},"Image",t),a[c].currentIndex=e,ue();document.querySelectorAll('body > *:not([aria-hidden="true"])').forEach((e=>{e.setAttribute("aria-hidden","true"),e.classList.add("parvus-hidden")})),h.classList.add("parvus--is-opening"),h.setAttribute("aria-hidden","false"),ee(),requestAnimationFrame((()=>{m.style.opacity=1,m.style.transition=`opacity ${C}ms ${p.transitionTimingFunction}`})),m.addEventListener("transitionend",(()=>{h.classList.remove("parvus--is-opening")}),{once:!0}),a[c].slider.setAttribute("aria-hidden","false"),F(a[c].currentIndex),W(),z(a[c].currentIndex),H(a[c].currentIndex+1),H(a[c].currentIndex-1);const n=new CustomEvent("open");h.dispatchEvent(n)},O=function(){if(!pe())throw new Error("Ups, I'm already closed.");ce(),J(),null!==history.state&&"close"===history.state.parvus&&history.back();document.querySelectorAll(".parvus-hidden").forEach((e=>{e.removeAttribute("aria-hidden"),e.classList.remove("parvus-hidden")})),h.classList.add("parvus--is-closing"),requestAnimationFrame((()=>{m.style.opacity=.1,m.style.transition=`opacity ${C}ms ${p.transitionTimingFunction}`})),m.addEventListener("transitionend",(()=>{j(a[c].currentIndex),x.focus({preventScroll:!0}),a[c].slider.setAttribute("aria-hidden","true"),h.setAttribute("aria-hidden","true"),h.classList.remove("parvus--is-closing")}),{once:!0});const e=new CustomEvent("close");h.dispatchEvent(e)},H=function(e){a[c].sliderElements[e]},F=function(e){void 0!==a[c].sliderElements[e]&&(a[c].sliderElements[e].classList.add("parvus__slide--is-active"),a[c].sliderElements[e].setAttribute("aria-hidden","false"))},P=function(e,t){const n=document.createElement("figure"),s=document.createElement("figurecaption"),i=e.querySelector("img");g=document.createElement("img"),"A"===e.tagName?(g.setAttribute("data-src",e.href),g.alt=i?i.alt||"":e.getAttribute("data-alt")||""):(g.alt=e.getAttribute("data-alt")||"",g.setAttribute("data-src",e.getAttribute("data-target"))),n.appendChild(g),e.hasAttribute("data-caption")&&""!==e.getAttribute("data-caption")&&(s.innerHTML=e.getAttribute("data-caption"),n.appendChild(s)),t.appendChild(n)},z=function(e){const t=a[c].sliderElements[e],n=t.querySelector("img"),s=a[c].gallery[e].getBoundingClientRect(),i=document.createElement("div");n.hasAttribute("data-src")&&(n.style.opacity=0,i.className="parvus__loader",i.setAttribute("role","progressbar"),i.setAttribute("aria-label",p.i18n[p.lang].lightboxLOADING_INDICATORLabel),t.appendChild(i),n.onload=()=>{const e=n.getBoundingClientRect();t.removeChild(i),r=s.width/e.width,o=s.height/e.height,l=s.left-e.left,d=s.top-e.top,n.setAttribute("width",n.naturalWidth),n.setAttribute("height",n.naturalHeight),requestAnimationFrame((()=>{n.style.transform=`translate(${l}px, ${d}px) scale(${r}, ${o})`,n.style.transition="transform 0s, opacity 0s",requestAnimationFrame((()=>{n.style.transform="",n.style.opacity=1,n.style.transition=`transform ${C}ms ${p.transitionTimingFunction}, opacity ${C}ms ${p.transitionTimingFunction}`}))}))},n.setAttribute("src",n.getAttribute("data-src")),n.removeAttribute("data-src"))},R=function(){pe()&&a[c].currentIndex>0&&(j(a[c].currentIndex),--a[c].currentIndex,F(a[c].currentIndex),z(a[c].currentIndex),W(),H(a[c].currentIndex-1))},U=function(){pe()&&a[c].currentIndex<a[c].elementsLength-1&&(j(a[c].currentIndex),++a[c].currentIndex,F(a[c].currentIndex),z(a[c].currentIndex),W(),H(a[c].currentIndex+1))},j=function(e){void 0!==a[c].sliderElements[e]&&(a[c].sliderElements[e].classList.remove("parvus__slide--is-active"),a[c].sliderElements[e].setAttribute("aria-hidden","true"))},W=function(){c=null!==c?c:u,_=-a[c].currentIndex*h.offsetWidth,a[c].slider.style.transform=`translate3d(${_}px, 0, 0)`,I=_},J=function(){L={startX:0,endX:0,startY:0,endY:0}},K=function(){const e=L.endX-L.startX,t=L.endY-L.startY,n=Math.abs(e),s=Math.abs(t);e>0&&n>=p.threshold&&a[c].currentIndex>0?R():e<0&&n>=p.threshold&&a[c].currentIndex!==a[c].elementsLength-1?U():s>0?s>=p.threshold&&p.swipeClose?O():(m.style.opacity=1,h.classList.remove("parvus--is-closing"),W()):W()},G=function(){(p.swipeClose&&!a[c].slider.classList.contains("parvus__slider--is-draggable")||a[c].elementsLength>1&&!a[c].slider.classList.contains("parvus__slider--is-draggable"))&&a[c].slider.classList.add("parvus__slider--is-draggable"),1===a[c].elementsLength?(f.setAttribute("aria-hidden","true"),f.disabled=!0,b.setAttribute("aria-hidden","true"),b.disabled=!0):(f.setAttribute("aria-hidden","false"),f.disabled=!1,b.setAttribute("aria-hidden","false"),b.disabled=!1)},V=function(e){e.preventDefault(),c=N(this),q(a[c].gallery.indexOf(this))},Q=function(e){e.target===f?R():e.target===b?U():(e.target===y||!w&&!E&&e.target.classList.contains("parvus__slide")&&p.docClose)&&O(),e.stopPropagation()},Z=function(){return Array.prototype.slice.call(h.querySelectorAll(`${s.join(", ")}`)).filter((function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}))},ee=function(){Z()[0].focus()},te=function(e){const t=Z(),n=t.indexOf(document.activeElement);"Tab"===e.code?e.shiftKey&&0===n?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||n!==t.length-1||(t[0].focus(),e.preventDefault()):"Escape"===e.code?(e.preventDefault(),O()):"ArrowLeft"===e.code?(e.preventDefault(),R()):"ArrowRight"===e.code&&(e.preventDefault(),U())},ne=function(){O()},se=function(e){e.preventDefault(),e.stopPropagation(),E=!1,w=!1,A=!0,L.startX=e.pageX,L.startY=e.pageY,a[c].slider.classList.add("parvus__slider--is-dragging")},ie=function(e){e.preventDefault(),A&&(L.endX=e.pageX,L.endY=e.pageY,de())},ae=function(e){e.stopPropagation(),A=!1,a[c].slider.classList.remove("parvus__slider--is-dragging"),(L.endX||L.endY)&&K(),J()},re=function(e){e.stopPropagation(),E=!1,w=!1,A=!0,L.startX=e.touches[0].pageX,L.startY=e.touches[0].pageY,a[c].slider.classList.add("parvus__slider--is-dragging")},oe=function(e){e.stopPropagation(),A&&(e.preventDefault(),L.endX=e.touches[0].pageX,L.endY=e.touches[0].pageY,de())},le=function(e){e.stopPropagation(),A=!1,a[c].slider.classList.remove("parvus__slider--is-dragging"),(L.endX||L.endY)&&K(),J()},de=function(){const e=L.startX-L.endX,t=L.endY-L.startY,n=Math.abs(t);Math.abs(e)>0&&!w&&a[c].elementsLength>1&&!T?(a[c].slider.style.transform=`translate3d(${I-Math.round(e)}px, 0, 0)`,E=!0,w=!1):Math.abs(t)>0&&!E&&p.swipeClose&&!T&&(n<=100&&(v=1-n/100),h.classList.add("parvus--is-closing"),m.style.opacity=v,a[c].slider.style.transform=`translate3d(${I}px, ${Math.round(t)}px, 0)`,E=!1,w=!0)},ue=function(){n.addEventListener("keydown",te),p.scrollClose&&n.addEventListener("wheel",ne),n.addEventListener("popstate",O),h.addEventListener("click",Q),he()&&(h.addEventListener("touchstart",re),h.addEventListener("touchmove",oe),h.addEventListener("touchend",le)),h.addEventListener("mousedown",se),h.addEventListener("mouseup",ae),h.addEventListener("mousemove",ie)},ce=function(){n.removeEventListener("keydown",te),p.scrollClose&&n.removeEventListener("wheel",ne),n.removeEventListener("popstate",O),h.removeEventListener("click",Q),he()&&(h.removeEventListener("touchstart",re),h.removeEventListener("touchmove",oe),h.removeEventListener("touchend",le)),h.removeEventListener("mousedown",se),h.removeEventListener("mouseup",ae),h.removeEventListener("mousemove",ie)},pe=function(){return"false"===h.getAttribute("aria-hidden")},he=function(){return"ontouchstart"in window};return $(t),e.init=$,e.open=q,e.close=O,e.previous=R,e.next=U,e.add=X,e.remove=Y,e.destroy=function(){pe()&&O();document.querySelectorAll(".parvus-zoom").forEach((e=>{Y(e)}));const e=new CustomEvent("destroy");h.dispatchEvent(e)},e.isOpen=pe,e.on=function(e,t){h.addEventListener(e,t)},e.off=function(e,t){h.removeEventListener(e,t)},e}export default e;

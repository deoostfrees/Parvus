/**
 * Parvus
 *
 * @author Benjamin de Oostfrees
 * @version 2.3.0
 * @url https://github.com/deoostfrees/parvus
 *
 * MIT license
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Parvus=t()}(this,(function(){"use strict";var e={lightboxLabel:"This is a dialog window which overlays the main content of the page. The modal shows the enlarged image. Pressing the Escape key will close the modal and bring you back to where you were on the page.",lightboxLoadingIndicatorLabel:"Image loading",lightboxLoadingError:"The requested image cannot be loaded.",controlsLabel:"Controls",previousButtonLabel:"Previous image",nextButtonLabel:"Next image",closeButtonLabel:"Close dialog window",sliderLabel:"Images",slideLabel:"Image"};return function t(a){const r=window,s=['a:not([inert]):not([tabindex^="-"])','button:not([inert]):not([tabindex^="-"]):not(:disabled)','[tabindex]:not([inert]):not([tabindex^="-"])'],i={gallery:[],slider:null,sliderElements:[],images:[]},n={},l=[];let o=null,d=null,u=0,c={},p=null,g=null,h=1,m=null,v=null,b=null,f=null,y=null,A=null,w=null,E=null,L=0,_=0,C=0,x=0,$={},I=!1,T=!1,S=!1,M=null,B=null,q=null,N=!1,F=null,X=!0;const Y=window.matchMedia("(prefers-reduced-motion)"),k=()=>{Y.matches?(X=!0,F=.1):(X=!1,F=c.transitionDuration)};Y.addEventListener("change",k);const H=e=>{const t=Math.floor(1e4*Math.random());return e.hasAttribute("data-group")&&""!==e.getAttribute("data-group")||e.setAttribute("data-group",`default-${t}`),e.getAttribute("data-group")},O=e=>{if(!("A"===e.tagName&&e.hasAttribute("href")||"BUTTON"===e.tagName&&e.hasAttribute("data-target")))throw new Error(e,"Use a link with the 'href' attribute or a button with the 'data-target' attribute. Both attributes must have a path to the image file.");if(o=H(e),Object.prototype.hasOwnProperty.call(n,o)||(n[o]=structuredClone(i)),n[o].gallery.includes(e))throw new Error("Ups, element already added.");if(n[o].gallery.push(e),null!==e.querySelector("img")){const t=document.createElement("div");e.classList.add("parvus-zoom"),t.className="parvus-zoom__indicator",t.innerHTML=c.lightboxIndicatorIcon,e.appendChild(t)}e.classList.add("parvus-trigger"),e.addEventListener("click",le),Ee()&&o===d&&(P(n[o].gallery.indexOf(e)),G(e,n[o].gallery.indexOf(e),(()=>{V(n[o].gallery.indexOf(e))})),se(),ee(),te())},z=e=>{if(Ee()||!p||!e||!e.hasAttribute("data-group"))return;const t=H(e);if(!n[t].gallery.includes(e))throw new Error("Ups, I can't find the element.");if(n[t].gallery.splice(n[t].gallery.indexOf(e),1),n[t].sliderElements.splice(n[t].gallery.indexOf(e),1),e.classList.contains("parvus-zoom")){const t=e.querySelector(".parvus-zoom__indicator");e.classList.remove("parvus-zoom"),e.removeChild(t)}Ee()&&t===d&&(se(),ee(),te()),e.removeEventListener("click",le),e.classList.remove("parvus-trigger")},P=e=>{if(void 0!==n[d].sliderElements[e]);else{const t=document.createElement("div"),a=document.createElement("div");t.className="parvus__slide",t.style.position="absolute",t.style.insetInlineStart=100*e+"%",n[d].gallery.length>1&&(t.setAttribute("role","group"),t.setAttribute("aria-label",`${c.l10n.slideLabel} ${e+1}/${n[d].gallery.length}`)),t.setAttribute("aria-hidden","true"),t.appendChild(a),n[d].sliderElements[e]=t,e===u&&n[d].slider.appendChild(t),e>u?n[d].sliderElements[u].after(t):n[d].sliderElements[u].before(t)}},R=e=>{if(!p||!e||!e.classList.contains("parvus-trigger")||Ee())return;if(d=H(e),!n[d].gallery.includes(e))throw new Error("Ups, I can't find the element.");u=n[d].gallery.indexOf(e),M=document.activeElement;const t=window.location.href;history.pushState({parvus:"close"},"Image",t),Ae();document.querySelectorAll('body > *:not([aria-hidden="true"])').forEach((e=>{e.setAttribute("aria-hidden","true"),e.classList.add("parvus-hidden")})),p.classList.add("parvus--is-opening"),p.setAttribute("aria-hidden","false"),n[d].slider=document.createElement("div"),n[d].slider.className="parvus__slider",n[d].gallery.length>1&&(n[d].slider.setAttribute("role","region"),n[d].slider.setAttribute("aria-roledescription","carousel"),n[d].slider.setAttribute("aria-label",c.l10n.sliderLabel)),n[d].slider.setAttribute("aria-hidden","true"),p.appendChild(n[d].slider),P(u),n[d].slider.setAttribute("aria-hidden","false"),Z(),se(),te(),ue(),j(u),G(e,u,(()=>{V(u),p.classList.remove("parvus--is-opening"),D(u+1),D(u-1),n[d].slider.classList.add("parvus__slider--animate")}));const a=new CustomEvent("open",{detail:{source:e}});p.dispatchEvent(a),document.body.classList.add("parvus-is-open")},U=()=>{if(!Ee())throw new Error("Ups, I'm already closed.");const e=n[d].images[u],t=e.getBoundingClientRect(),a=(c.backFocus?n[d].gallery[u]:M).getBoundingClientRect();we(),ae(),null!==history.state&&"close"===history.state.parvus&&history.back();document.querySelectorAll(".parvus-hidden").forEach((e=>{e.removeAttribute("aria-hidden"),e.classList.remove("parvus-hidden")})),p.classList.add("parvus--is-closing"),requestAnimationFrame((()=>{"IMG"===e.tagName&&(L=a.width/t.width,_=a.height/t.height,C=a.left-t.left,x=a.top-t.top,e.style.transform=`translate(${C}px, ${x}px) scale(${L}, ${_})`),e.style.opacity=0,e.style.transition=`transform ${F}ms ${c.transitionTimingFunction}, opacity ${F}ms ${c.transitionTimingFunction} ${F/2}ms`})),e.addEventListener("transitionend",(()=>{Q(u),M=c.backFocus?n[d].gallery[u]:M,M.focus({preventScroll:!0}),p.setAttribute("aria-hidden","true"),p.classList.remove("parvus--is-closing"),p.classList.remove("parvus--is-vertical-closing"),e.style.transform="",n[d].slider.remove(),n[d].slider=null,n[d].sliderElements=[],n[d].images=[]}),{once:!0});const r=new CustomEvent("close",{detail:{source:n[d].gallery[u]}});p.dispatchEvent(r),document.body.classList.remove("parvus-is-open")},D=e=>{void 0!==n[d].gallery[e]&&(P(e),G(n[d].gallery[e],e,(()=>{V(e)})))},j=e=>{n[d].sliderElements[e].setAttribute("aria-hidden","false")},G=(e,t,a)=>{if(void 0!==n[d].images[t]);else{const r=n[d].sliderElements[t].querySelector("div"),s=new Image,i=document.createElement("div"),o=document.createElement("div"),u=e.querySelector("img"),p=document.createElement("div");if(i.className="parvus__content",o.className="parvus__caption",p.className="parvus__loader",p.setAttribute("role","progressbar"),p.setAttribute("aria-label",c.l10n.lightboxLoadingIndicatorLabel),r.appendChild(p),l[t]=new Promise(((e,t)=>{s.onload=()=>e(s),s.onerror=e=>t(e)})),l[t].then((e=>{n[d].images[t]=e,r.removeChild(p),e.setAttribute("width",e.naturalWidth),e.setAttribute("height",e.naturalHeight),ne(n[d].sliderElements[t],e),a&&"function"==typeof a&&a()})).catch((e=>{i.classList.add("parvus__content--error"),i.innerHTML="";const s=document.createElement("div");s.innerHTML=c.l10n.lightboxLoadingError,i.appendChild(s),n[d].images[t]=s,r.removeChild(p),a&&"function"==typeof a&&a()})),"A"===e.tagName?(s.setAttribute("src",e.href),s.alt=u?u.alt||"":e.getAttribute("data-alt")||""):(s.alt=e.getAttribute("data-alt")||"",s.setAttribute("src",e.getAttribute("data-target"))),e.hasAttribute("data-srcset")&&""!==e.getAttribute("data-srcset")&&s.setAttribute("srcset",e.getAttribute("data-srcset")),s.style.opacity=0,i.appendChild(s),r.appendChild(i),c.captions){let a=null;if("self"===c.captionsSelector)e.hasAttribute(c.captionsAttribute)&&""!==e.getAttribute(c.captionsAttribute)&&(a=e.getAttribute(c.captionsAttribute));else if(null!==e.querySelector(c.captionsSelector)){const t=e.querySelector(c.captionsSelector);a=t.hasAttribute(c.captionsAttribute)&&""!==t.getAttribute(c.captionsAttribute)?t.getAttribute(c.captionsAttribute):t.innerHTML}null!==a&&(n[d].sliderElements[t].setAttribute("aria-labelledby",`parvus__caption-${t}`),o.id=`parvus__caption-${t}`,o.innerHTML=`<p>${a}</p>`,r.appendChild(o))}}},V=e=>{const t=n[d].images[e];if("IMG"===t.tagName){const a=t.getBoundingClientRect(),r=n[d].gallery[e].getBoundingClientRect();p.classList.contains("parvus--is-opening")?(L=r.width/a.width,_=r.height/a.height,C=r.left-a.left,x=r.top-a.top,requestAnimationFrame((()=>{t.style.transform=`translate(${C}px, ${x}px) scale(${L}, ${_})`,t.style.transition="transform 0s, opacity 0s",requestAnimationFrame((()=>{t.style.transform="",t.style.opacity=1,t.style.transition=`transform ${F}ms ${c.transitionTimingFunction}, opacity ${F/2}ms ${c.transitionTimingFunction}`}))}))):t.style.opacity=1}else t.style.opacity=1},W=e=>{const t=u;if(!Ee())throw new Error("Ups, I'm closed.");if(!e&&0!==e)throw new Error("Ups, no slide specified.");if(e===u)throw new Error(`Ups, slide ${e} is already selected.`);if(-1===e||e>=n[d].gallery.length)throw new Error(`Ups, I can't find slide ${e}.`);V(e),j(e),e<t&&(u-=1,Z(),se(),ee("left"),D(e-1)),e>t&&(u+=1,Z(),se(),ee("right"),D(e+1)),Q(t),te();const a=new CustomEvent("select",{detail:{source:n[d].gallery[u]}});p.dispatchEvent(a)},K=()=>{u>0&&W(u-1)},J=()=>{u<n[d].gallery.length-1&&W(u+1)},Q=e=>{n[d].sliderElements[e].setAttribute("aria-hidden","true")},Z=()=>{d=null!==d?d:o,B=u*p.offsetWidth*-1,n[d].slider.style.transform=`translate3d(${B}px, 0, 0)`,q=B},ee=e=>{1===n[d].gallery.length?w.focus():0===u?A.focus():u===n[d].gallery.length-1||"left"===e?y.focus():A.focus()},te=()=>{E.textContent=`${u+1}/${n[d].gallery.length}`},ae=()=>{$={startX:0,endX:0,startY:0,endY:0}},re=()=>{const e=$.endX-$.startX,t=$.endY-$.startY,a=Math.abs(e),r=Math.abs(t);I?e>2&&a>=c.threshold&&u>0?K():e<2&&a>=c.threshold&&u!==n[d].gallery.length-1?J():Z():T?(r>2&&c.swipeClose&&r>=c.threshold?U():(p.classList.remove("parvus--is-vertical-closing"),Z()),g.style.opacity=""):Z()},se=()=>{((c.simulateTouch||Le())&&c.swipeClose&&!n[d].slider.classList.contains("parvus__slider--is-draggable")||(c.simulateTouch||Le())&&n[d].gallery.length>1&&!n[d].slider.classList.contains("parvus__slider--is-draggable"))&&n[d].slider.classList.add("parvus__slider--is-draggable"),1===n[d].gallery.length?(y.setAttribute("aria-hidden","true"),y.setAttribute("aria-disabled","true"),A.setAttribute("aria-hidden","true"),A.setAttribute("aria-disabled","true")):0===u?(y.setAttribute("aria-hidden","true"),y.setAttribute("aria-disabled","true"),A.setAttribute("aria-hidden","false"),A.setAttribute("aria-disabled","false")):u===n[d].gallery.length-1?(y.setAttribute("aria-hidden","false"),y.setAttribute("aria-disabled","false"),A.setAttribute("aria-hidden","true"),A.setAttribute("aria-disabled","true")):(y.setAttribute("aria-hidden","false"),y.setAttribute("aria-disabled","false"),A.setAttribute("aria-hidden","false"),A.setAttribute("aria-disabled","false")),1===n[d].gallery.length?E.setAttribute("aria-hidden","true"):E.setAttribute("aria-hidden","false")},ie=()=>{N||(N=!0,r.requestAnimationFrame((()=>{n[d].sliderElements.forEach(((e,t)=>{ne(e,n[d].images[t])})),Z(),N=!1})))},ne=(e,t)=>{if("IMG"===t.tagName){const a=getComputedStyle(e),r=null!==e.querySelector(".parvus__caption")?e.querySelector(".parvus__caption").getBoundingClientRect().height:0,s=t.getAttribute("height"),i=t.getAttribute("width");let n=e.getBoundingClientRect().height,l=e.getBoundingClientRect().width;n-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom)+parseFloat(r),l-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight);const o=Math.min(l/i||0,n/s),d=i*o||0,u=s*o||0;s>u&&s<n&&i>d&&i<l||s<u&&s<n&&i<d&&i<l?(t.style.width="",t.style.height=""):(t.style.width=`${d}px`,t.style.height=`${u}px`)}},le=function(e){e.preventDefault(),R(this)},oe=e=>{e.target===y?K():e.target===A?J():(e.target===w||!T&&!I&&e.target.classList.contains("parvus__slide")&&c.docClose)&&U(),e.stopPropagation()},de=()=>Array.prototype.slice.call(p.querySelectorAll(`${s.join(", ")}`)).filter((e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length))),ue=()=>{de()[0].focus()},ce=e=>{const t=de(),a=t.indexOf(document.activeElement);"Tab"===e.code?(e.shiftKey&&0===a?t[t.length-1].focus():e.shiftKey||a!==t.length-1||t[0].focus(),e.preventDefault()):"Escape"===e.code?(U(),e.preventDefault()):"ArrowLeft"===e.code?(K(),e.preventDefault()):"ArrowRight"===e.code&&(J(),e.preventDefault())},pe=()=>{U()},ge=e=>{I=!1,T=!1,S=!0,$.startX=e.pageX,$.startY=e.pageY,n[d].slider.classList.add("parvus__slider--is-dragging"),n[d].slider.style.willChange="transform",e.stopPropagation(),h=window.getComputedStyle(g).getPropertyValue("opacity")},he=e=>{S&&($.endX=e.pageX,$.endY=e.pageY,ye()),e.preventDefault()},me=e=>{S=!1,n[d].slider.classList.remove("parvus__slider--is-dragging"),n[d].slider.style.willChange="auto",($.endX||$.endY)&&re(),ae()},ve=e=>{I=!1,T=!1,$.startX=parseInt(e.changedTouches[0].clientX),$.startY=parseInt(e.changedTouches[0].clientY),n[d].slider.classList.add("parvus__slider--is-dragging"),n[d].slider.style.willChange="transform",h=window.getComputedStyle(g).getPropertyValue("opacity"),e.stopPropagation()},be=e=>{$.endX=parseInt(e.changedTouches[0].clientX),$.endY=parseInt(e.changedTouches[0].clientY),ye(),e.preventDefault()},fe=()=>{n[d].slider.classList.remove("parvus__slider--is-dragging"),n[d].slider.style.willChange="auto",($.endX||$.endY)&&re(),ae()},ye=()=>{const e=$.startX-$.endX,t=$.endY-$.startY,a=Math.abs(t);Math.abs(e)>2&&!T&&n[d].gallery.length>1?(n[d].slider.style.transform=`translate3d(${q-Math.round(e)}px, 0, 0)`,I=!0,T=!1):Math.abs(t)>2&&!I&&c.swipeClose&&(X||a<=100&&(g.style.opacity=h-a/100),p.classList.add("parvus--is-vertical-closing"),n[d].slider.style.transform=`translate3d(${q}px, ${Math.round(t)}px, 0)`,I=!1,T=!0)},Ae=()=>{r.addEventListener("keydown",ce),r.addEventListener("resize",ie),c.scrollClose&&r.addEventListener("wheel",pe),r.addEventListener("popstate",U),p.addEventListener("click",oe),Le()&&(p.addEventListener("touchstart",ve),p.addEventListener("touchmove",be),p.addEventListener("touchend",fe)),c.simulateTouch&&(p.addEventListener("mousedown",ge),p.addEventListener("mouseup",me),p.addEventListener("mousemove",he))},we=()=>{r.removeEventListener("keydown",ce),r.removeEventListener("resize",ie),c.scrollClose&&r.removeEventListener("wheel",pe),r.removeEventListener("popstate",U),p.removeEventListener("click",oe),Le()&&(p.removeEventListener("touchstart",ve),p.removeEventListener("touchmove",be),p.removeEventListener("touchend",fe)),c.simulateTouch&&(p.removeEventListener("mousedown",ge),p.removeEventListener("mouseup",me),p.removeEventListener("mousemove",he))},Ee=()=>"false"===p.getAttribute("aria-hidden"),Le=()=>"ontouchstart"in window,_e=()=>{if(c=(t=>({selector:".lightbox",gallerySelector:null,captions:!0,captionsSelector:"self",captionsAttribute:"data-caption",docClose:!0,scrollClose:!1,swipeClose:!0,simulateTouch:!0,threshold:50,backFocus:!0,transitionDuration:300,transitionTimingFunction:"cubic-bezier(0.62, 0.16, 0.13, 1.01)",lightboxIndicatorIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3"/></svg>',previousButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18" /></svg>',nextButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="9 6 15 12 9 18" /></svg>',closeButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M18 6L6 18M6 6l12 12"/></svg>',l10n:e,...t}))(a),!document.querySelectorAll(c.selector).length)return;if(k(),p||(p=document.createElement("div"),p.setAttribute("role","dialog"),p.setAttribute("aria-modal","true"),p.setAttribute("aria-hidden","true"),p.setAttribute("tabindex","-1"),p.setAttribute("aria-label",c.l10n.lightboxLabel),p.classList.add("parvus"),g=document.createElement("div"),g.classList.add("parvus__overlay"),p.appendChild(g),m=document.createElement("div"),m.className="parvus__toolbar",v=document.createElement("div"),b=document.createElement("div"),f=document.createElement("div"),f.className="parvus__controls",f.setAttribute("role","group"),f.setAttribute("aria-label",c.l10n.controlsLabel),b.appendChild(f),w=document.createElement("button"),w.className="parvus__btn parvus__btn--close",w.setAttribute("type","button"),w.setAttribute("aria-label",c.l10n.closeButtonLabel),w.innerHTML=c.closeButtonIcon,f.appendChild(w),y=document.createElement("button"),y.className="parvus__btn parvus__btn--previous",y.setAttribute("type","button"),y.setAttribute("aria-label",c.l10n.previousButtonLabel),y.innerHTML=c.previousButtonIcon,f.appendChild(y),A=document.createElement("button"),A.className="parvus__btn parvus__btn--next",A.setAttribute("type","button"),A.setAttribute("aria-label",c.l10n.nextButtonLabel),A.innerHTML=c.nextButtonIcon,f.appendChild(A),E=document.createElement("div"),E.className="parvus__counter",v.appendChild(E),m.appendChild(v),m.appendChild(b),p.appendChild(m),document.body.appendChild(p)),null!==c.gallerySelector){document.querySelectorAll(c.gallerySelector).forEach(((e,t)=>{const a=t;e.querySelectorAll(c.selector).forEach((e=>{e.setAttribute("data-group",`parvus-gallery-${a}`),O(e)}))}))}document.querySelectorAll(`${c.selector}:not(.parvus-trigger)`).forEach((e=>{O(e)}))};return _e(),t.init=_e,t.open=R,t.close=U,t.select=W,t.previous=K,t.next=J,t.currentIndex=()=>u,t.add=O,t.remove=z,t.destroy=()=>{if(!p)return;Ee()&&U(),p.remove();document.querySelectorAll(".parvus-trigger").forEach((e=>{z(e)}));const e=new CustomEvent("destroy");p.dispatchEvent(e)},t.isOpen=Ee,t.on=(e,t)=>{p&&p.addEventListener(e,t)},t.off=(e,t)=>{p&&p.removeEventListener(e,t)},t}}));

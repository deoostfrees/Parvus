/**
 * Parvus
 *
 * @author Benjamin de Oostfrees
 * @version 2.6.0
 * @url https://github.com/deoostfrees/parvus
 *
 * MIT license
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Parvus=t()}(this,(function(){"use strict";const e=['a:not([inert]):not([tabindex^="-"])','button:not([inert]):not([tabindex^="-"]):not(:disabled)','[tabindex]:not([inert]):not([tabindex^="-"])'],t=t=>Array.from(t.querySelectorAll(e.join(", "))).filter((e=>null!==e.offsetParent)),r=window,n=()=>r.innerWidth-document.documentElement.clientWidth,i=e=>{if(e.querySelector("img")&&null!==e.querySelector(config.lightboxIndicatorClass)){const t=e.querySelector(config.lightboxIndicatorClass);e.removeChild(t)}};var s={lightboxLabel:"This is a dialog window that overlays the main content of the page. The modal displays the enlarged image. Pressing the Escape key will close the modal and bring you back to where you were on the page.",lightboxLoadingIndicatorLabel:"Image loading",lightboxLoadingError:"The requested image cannot be loaded.",controlsLabel:"Controls",previousButtonLabel:"Previous image",nextButtonLabel:"Next image",closeButtonLabel:"Close dialog window",sliderLabel:"Images",slideLabel:"Image"};return function(e){const r=window,a={triggerElements:[],slider:null,sliderElements:[],contentElements:[]},o={};let l=0,d=null,u=null,c=0,p={},g=null,m=null,h=1,b=null,v=null,f=null,E=null,A=null,y=null,w=null,L=null,C={},x=!1,_=!1,$=!1,I=null,k=null,S=null,B=!1,T=null,M=!0;const q=r.matchMedia("(prefers-reduced-motion)"),N=()=>{q.matches?(M=!0,T=.1):(M=!1,T=p.transitionDuration)},F=e=>{const t=e.dataset.group||`default-${l}`;return++l,e.hasAttribute("data-group")||e.setAttribute("data-group",t),t},X=e=>{if(g){if(!("A"===e.tagName&&e.hasAttribute("href")||"BUTTON"===e.tagName&&e.hasAttribute("data-target")))throw new Error("Use a link with the 'href' attribute or a button with the 'data-target' attribute. Both attributes must contain a path to the image file.");if(d=F(e),o[d]||(o[d]=structuredClone(a)),o[d].triggerElements.includes(e))throw new Error("Ups, element already added.");if(o[d].triggerElements.push(e),p.lightboxIndicator&&((e,t)=>{if(e.querySelector("img")&&null===e.querySelector(t.lightboxIndicatorClass)){const r=document.createElement("div");r.className=t.lightboxIndicatorClass,r.innerHTML=t.lightboxIndicatorIcon,e.appendChild(r)}})(e,p),e.classList.add("parvus-trigger"),e.addEventListener("click",ie),ve()&&d===u){const t=o[d].triggerElements.indexOf(e);H(t),R(e,t,(()=>{j(t)})),te(),J(),Q()}}},Y=e=>{if(!e||!e.hasAttribute("data-group"))return;const t=F(e);if(!o[t]||!o[t].triggerElements.includes(e))return;const r=o[t].triggerElements.indexOf(e);o[t].triggerElements.splice(r,1),o[t].sliderElements.splice(r,1),p.lightboxIndicator&&i(e),ve()&&t===u&&(te(),J(),Q()),e.removeEventListener("click",ie),e.classList.remove("parvus-trigger")},H=e=>{if(void 0!==o[u].sliderElements[e])return;const t=document.createElement("div"),r=document.createElement("div"),n=o[u].triggerElements.length;if(t.className="parvus__slide",t.style.position="absolute",t.style.left=100*e+"%",t.setAttribute("aria-hidden","true"),t.appendChild(r),n>1&&(t.setAttribute("role","group"),t.setAttribute("aria-label",`${p.l10n.slideLabel} ${e+1}/${n}`)),o[u].sliderElements[e]=t,e>=c){const r=(e=>{const t=o[u].sliderElements,r=t.length;for(let n=e+1;n<r;n++)if(void 0!==t[n])return n;return-1})(e);-1!==r?o[u].sliderElements[r].before(t):o[u].slider.appendChild(t)}else{const r=(e=>{const t=o[u].sliderElements;for(let r=e-1;r>=0;r--)if(void 0!==t[r])return r;return-1})(e);-1!==r?o[u].sliderElements[r].after(t):o[u].slider.prepend(t)}},D=e=>{if(!g||!e||!e.classList.contains("parvus-trigger")||ve())return;if(u=F(e),!o[u].triggerElements.includes(e))throw new Error("Ups, I can't find the element.");c=o[u].triggerElements.indexOf(e),I=document.activeElement,history.pushState({parvus:"close"},"Image",window.location.href),he();document.querySelectorAll('body > *:not([aria-hidden="true"])').forEach((e=>{e.setAttribute("aria-hidden","true"),e.classList.add("parvus-hidden")})),p.hideScrollbar&&(document.body.style.marginInlineEnd=`${n()}px`,document.body.style.overflow="hidden"),g.classList.add("parvus--is-opening"),g.setAttribute("aria-hidden","false"),(()=>{const e=document.createElement("div");e.className="parvus__slider",e.setAttribute("aria-hidden","true"),o[u].slider=e,g.appendChild(e)})(),H(c),o[u].slider.setAttribute("aria-hidden","false"),V(),te(),J(),Q(),ae(),O(c),R(e,c,(()=>{j(c,!0),g.classList.remove("parvus--is-opening"),o[u].slider.classList.add("parvus__slider--animate")})),z(c+1),z(c-1),Ee("open",{source:e})},P=()=>{if(!ve())throw new Error("Ups, I'm already closed.");const e=o[u].contentElements[c],t=o[u].triggerElements[c];be(),Z(),"close"===history.state?.parvus&&history.back();document.querySelectorAll(".parvus-hidden").forEach((e=>{e.removeAttribute("aria-hidden"),e.classList.remove("parvus-hidden")})),g.classList.add("parvus--is-closing"),requestAnimationFrame((()=>{const r=t.getBoundingClientRect();if(e&&"IMG"===e.tagName){const t=e.getBoundingClientRect(),n=r.width/t.width,i=r.height/t.height,s=r.left-t.left,a=r.top-t.top;e.style.transform=`translate(${s}px, ${a}px) scale(${n}, ${i})`}e.style.opacity=0,e.style.transition=`transform ${T}ms ${p.transitionTimingFunction}, opacity ${T}ms ${p.transitionTimingFunction} ${T/2}ms`}));const r=()=>{K(c),I=p.backFocus?I:o[u].triggerElements[c],I.focus({preventScroll:!0}),g.setAttribute("aria-hidden","true"),g.classList.remove("parvus--is-closing"),g.classList.remove("parvus--is-vertical-closing"),e.style.transform="",e.removeEventListener("transitionend",r),o[u].slider.remove(),o[u].slider=null,o[u].sliderElements=[],o[u].contentElements=[],L.removeAttribute("aria-hidden"),A.removeAttribute("aria-hidden"),A.removeAttribute("aria-disabled"),y.removeAttribute("aria-hidden"),y.removeAttribute("aria-disabled"),p.hideScrollbar&&(document.body.style.marginInlineEnd="",document.body.style.overflow="")};e.addEventListener("transitionend",r,{once:!0}),Ee("close",{detail:{source:o[u].triggerElements[c]}})},z=e=>{e<0||e>=o[u].triggerElements.length||void 0!==o[u].sliderElements[e]||(H(e),R(o[u].triggerElements[e],e,(()=>{j(e)})))},O=e=>{o[u].sliderElements[e].setAttribute("aria-hidden","false")},R=(e,t,r)=>{const{contentElements:n,sliderElements:i}=o[u];if(void 0!==n[t])return void(r&&"function"==typeof r&&r());const s=i[t].querySelector("div"),a=new Image,l=document.createElement("div"),d=e.querySelector("img"),c=document.createElement("div");l.className="parvus__content",c.className="parvus__loader",c.setAttribute("role","progressbar"),c.setAttribute("aria-label",p.l10n.lightboxLoadingIndicatorLabel),s.appendChild(c);new Promise(((e,t)=>{a.onload=()=>e(a),a.onerror=e=>t(e)})).then((r=>{r.style.opacity=0,l.appendChild(r),s.appendChild(l),p.captions&&((e,t,r,n)=>{const i=document.createElement("div");let s=null;if(i.className="parvus__caption","self"===p.captionsSelector)r.hasAttribute(p.captionsAttribute)&&""!==r.getAttribute(p.captionsAttribute)&&(s=r.getAttribute(p.captionsAttribute));else{const e=r.querySelector(p.captionsSelector);null!==e&&(s=e.hasAttribute(p.captionsAttribute)&&""!==e.getAttribute(p.captionsAttribute)?e.getAttribute(p.captionsAttribute):e.innerHTML)}if(null!==s){const r=`parvus__caption-${n}`;i.id=r,i.innerHTML=`<p>${s}</p>`,e.appendChild(i),t.setAttribute("aria-describedby",r)}})(s,a,e,t),n[t]=r,r.setAttribute("width",r.naturalWidth),r.setAttribute("height",r.naturalHeight),ne(i[t],r)})).catch((()=>{const e=document.createElement("div");e.classList.add("parvus__content"),e.classList.add("parvus__content--error"),e.innerHTML=`${p.l10n.lightboxLoadingError}`,s.appendChild(e),n[t]=e})).finally((()=>{s.removeChild(c),r&&"function"==typeof r&&r()})),e.hasAttribute("data-sizes")&&""!==e.getAttribute("data-sizes")&&a.setAttribute("sizes",e.getAttribute("data-sizes")),e.hasAttribute("data-srcset")&&""!==e.getAttribute("data-srcset")&&a.setAttribute("srcset",e.getAttribute("data-srcset")),"A"===e.tagName?a.setAttribute("src",e.href):a.setAttribute("src",e.getAttribute("data-target")),d&&d.hasAttribute("alt")&&""!==d.getAttribute("alt")?a.alt=d.alt:e.hasAttribute("data-alt")&&""!==e.getAttribute("data-alt")?a.alt=e.getAttribute("data-alt"):a.alt=""},j=(e,t)=>{const r=o[u].contentElements[e];if(r&&"IMG"===r.tagName){const n=o[u].triggerElements[e];if(t){const e=r.getBoundingClientRect(),t=n.getBoundingClientRect(),i=t.width/e.width,s=t.height/e.height,a=t.left-e.left,o=t.top-e.top;requestAnimationFrame((()=>{r.style.transform=`translate(${a}px, ${o}px) scale(${i}, ${s})`,r.style.transition="transform 0s, opacity 0s",requestAnimationFrame((()=>{r.style.transform="",r.style.opacity="",r.style.transition=`transform ${T}ms ${p.transitionTimingFunction}, opacity ${T/2}ms ${p.transitionTimingFunction}`}))}))}else r.style.opacity=""}else r.style.opacity=""},U=e=>{const t=c;if(!ve())throw new Error("Oops, I'm closed.");{if("number"!=typeof e||isNaN(e))throw new Error("Oops, no slide specified.");const t=o[u].triggerElements;if(e===c)throw new Error(`Oops, slide ${e} is already selected.`);if(e<-1||e>=t.length)throw new Error(`Oops, I can't find slide ${e}.`)}void 0!==o[u].sliderElements[e]||(H(e),R(o[u].triggerElements[e],e,(()=>{j(e)}))),O(e),c=e,V(),e<t?(J(),z(e-1)):e>t&&(J(),z(e+1)),K(t),Q(),Ee("select",{detail:{source:o[u].triggerElements[c]}})},W=()=>{c>0&&U(c-1)},G=()=>{const{triggerElements:e}=o[u];c<e.length-1&&U(c+1)},K=e=>{void 0!==o[u].sliderElements[e]&&o[u].sliderElements[e].setAttribute("aria-hidden","true")},V=()=>{u=null!==u?u:d,k=-c*g.offsetWidth,o[u].slider.style.transform=`translate3d(${k}px, 0, 0)`,S=k},J=()=>{const{triggerElements:e}=o[u],t=e.length,r=c===t-1;t>1&&(0===c?(A.setAttribute("aria-disabled","true"),y.removeAttribute("aria-disabled")):r?(A.removeAttribute("aria-disabled"),y.setAttribute("aria-disabled","true")):(A.removeAttribute("aria-disabled"),y.removeAttribute("aria-disabled")))},Q=()=>{L.textContent=`${c+1}/${o[u].triggerElements.length}`},Z=()=>{C={startX:0,endX:0,startY:0,endY:0}},ee=()=>{const{startX:e,startY:t,endX:r,endY:n}=C,i=r-e,s=n-t,a=Math.abs(i),l=Math.abs(s),{triggerElements:d}=o[u],h=d.length;x?i>2&&a>=p.threshold&&c>0?W():i<2&&a>=p.threshold&&c!==h-1?G():V():_?(l>2&&p.swipeClose&&l>=p.threshold?P():(g.classList.remove("parvus--is-vertical-closing"),V()),m.style.opacity=""):V()},te=()=>{const e=o[u].triggerElements.length,t=o[u].slider,r=o[u].sliderElements,n=p.simulateTouch||fe(),i=t.classList.contains("parvus__slider--is-draggable");n&&p.swipeClose&&!i||n&&e>1&&!i?t.classList.add("parvus__slider--is-draggable"):t.classList.remove("parvus__slider--is-draggable"),e>1?(t.setAttribute("role","region"),t.setAttribute("aria-roledescription","carousel"),t.setAttribute("aria-label",p.l10n.sliderLabel),r.forEach(((t,r)=>{t.setAttribute("role","group"),t.setAttribute("aria-label",`${p.l10n.slideLabel} ${r+1}/${e}`)}))):(t.removeAttribute("role"),t.removeAttribute("aria-roledescription"),t.removeAttribute("aria-label"),r.forEach((e=>{e.removeAttribute("role"),e.removeAttribute("aria-label")}))),1===e?(L.setAttribute("aria-hidden","true"),A.setAttribute("aria-hidden","true"),y.setAttribute("aria-hidden","true")):(L.removeAttribute("aria-hidden"),A.removeAttribute("aria-hidden"),y.removeAttribute("aria-hidden"))},re=()=>{B||(B=!0,r.requestAnimationFrame((()=>{o[u].sliderElements.forEach(((e,t)=>{ne(e,o[u].contentElements[t])})),V(),B=!1})))},ne=(e,t)=>{if("IMG"!==t.tagName)return;const r=getComputedStyle(e),n=e.querySelector(".parvus__caption"),i=n?n.getBoundingClientRect().height:0,s=t.getAttribute("height"),a=t.getAttribute("width");let o=e.offsetHeight,l=e.offsetWidth;o-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(i),l-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight);const d=Math.min(l/a||0,o/s),u=a*d||0,c=s*d||0;s>c&&s<o&&a>u&&a<l||s<c&&s<o&&a<u&&a<l?(t.style.width="",t.style.height=""):(t.style.width=`${u}px`,t.style.height=`${c}px`)},ie=function(e){e.preventDefault(),D(this)},se=e=>{const{target:t}=e;console.log(t),t===A?W():t===y?G():(t===w||p.docClose&&!_&&!x&&t.classList.contains("parvus__slide"))&&P(),e.stopPropagation()},ae=()=>{t(g)[0].focus()},oe=e=>{const r=t(g),n=r.indexOf(document.activeElement),i=r.length-1;switch(e.code){case"Tab":e.shiftKey?0===n&&(r[i].focus(),e.preventDefault()):n===i&&(r[0].focus(),e.preventDefault());break;case"Escape":P(),e.preventDefault();break;case"ArrowLeft":W(),e.preventDefault();break;case"ArrowRight":G(),e.preventDefault()}},le=e=>{e.preventDefault(),e.stopPropagation(),x=!1,_=!1,$=!0;const{pageX:t,pageY:r}=e;C.startX=t,C.startY=r;const{slider:n}=o[u];n.classList.add("parvus__slider--is-dragging"),n.style.willChange="transform",h=getComputedStyle(m).opacity},de=e=>{if(e.preventDefault(),$){const{pageX:t,pageY:r}=e;C.endX=t,C.endY=r,me()}},ue=e=>{e.stopPropagation(),$=!1;const{slider:t}=o[u];t.classList.remove("parvus__slider--is-dragging"),t.style.willChange="",(C.endX||C.endY)&&ee(),Z()},ce=e=>{e.stopPropagation(),x=!1,_=!1;const{clientX:t,clientY:r}=e.changedTouches[0];C.startX=parseInt(t,10),C.startY=parseInt(r,10);const{slider:n}=o[u];n.classList.add("parvus__slider--is-dragging"),n.style.willChange="transform",h=getComputedStyle(m).opacity},pe=e=>{e.preventDefault(),e.stopPropagation();const{clientX:t,clientY:r}=e.changedTouches[0];C.endX=parseInt(t,10),C.endY=parseInt(r,10),me()},ge=e=>{e.stopPropagation();const{slider:t}=o[u];t.classList.remove("parvus__slider--is-dragging"),t.style.willChange="",(C.endX||C.endY)&&ee(),Z()},me=()=>{const{startX:e,endX:t,startY:r,endY:n}=C,i=e-t,s=n-r,a=Math.abs(s);Math.abs(i)>2&&!_&&o[u].triggerElements.length>1?(o[u].slider.style.transform=`translate3d(${S-Math.round(i)}px, 0, 0)`,x=!0,_=!1):Math.abs(s)>2&&!x&&p.swipeClose&&(!M&&a<=100&&(m.style.opacity=h-a/100),g.classList.add("parvus--is-vertical-closing"),o[u].slider.style.transform=`translate3d(${S}px, ${Math.round(s)}px, 0)`,x=!1,_=!0)},he=()=>{r.addEventListener("keydown",oe),r.addEventListener("resize",re),r.addEventListener("popstate",P),q.addEventListener("change",N),g.addEventListener("click",se),fe()&&(g.addEventListener("touchstart",ce),g.addEventListener("touchmove",pe),g.addEventListener("touchend",ge)),p.simulateTouch&&(g.addEventListener("mousedown",le),g.addEventListener("mouseup",ue),g.addEventListener("mousemove",de))},be=()=>{r.removeEventListener("keydown",oe),r.removeEventListener("resize",re),r.removeEventListener("popstate",P),q.removeEventListener("change",N),g.removeEventListener("click",se),fe()&&(g.removeEventListener("touchstart",ce),g.removeEventListener("touchmove",pe),g.removeEventListener("touchend",ge)),p.simulateTouch&&(g.removeEventListener("mousedown",le),g.removeEventListener("mouseup",ue),g.removeEventListener("mousemove",de))},ve=()=>"false"===g.getAttribute("aria-hidden"),fe=()=>"ontouchstart"in window,Ee=(e,t={})=>{const r=new CustomEvent(e,{detail:t,cancelable:!0});g.dispatchEvent(r)},Ae=()=>{if(p=(e=>{const t={loadEmpty:!1,selector:".lightbox",gallerySelector:null,captions:!0,captionsSelector:"self",captionsAttribute:"data-caption",docClose:!0,swipeClose:!0,simulateTouch:!0,threshold:50,backFocus:!0,hideScrollbar:!0,transitionDuration:300,transitionTimingFunction:"cubic-bezier(0.62, 0.16, 0.13, 1.01)",lightboxIndicator:!0,lightboxIndicatorIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" stroke="currentColor"><path d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3"/></svg>',previousButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" stroke="currentColor"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18" /></svg>',nextButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" stroke="currentColor"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="9 6 15 12 9 18" /></svg>',closeButtonIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" stroke="currentColor"><path d="M18 6L6 18M6 6l12 12"/></svg>',previousButtonClass:"parvus__btn parvus__btn--previous",nextButtonClass:"parvus__btn parvus__btn--next",closeButtonClass:"parvus__btn parvus__btn--close",lightboxIndicatorClass:"parvus-zoom__indicator",l10n:s},r={...t,...e};return e&&e.l10n&&(r.l10n={...t.l10n,...e.l10n}),r})(e),!p.loadEmpty&&!document.querySelectorAll(p.selector).length)return;if(N(),g||(g=document.createElement("div"),g.setAttribute("role","dialog"),g.setAttribute("aria-modal","true"),g.setAttribute("aria-hidden","true"),g.setAttribute("tabindex","-1"),g.setAttribute("aria-label",p.l10n.lightboxLabel),g.classList.add("parvus"),m=document.createElement("div"),m.classList.add("parvus__overlay"),g.appendChild(m),b=document.createElement("div"),b.className="parvus__toolbar",v=document.createElement("div"),f=document.createElement("div"),E=document.createElement("div"),E.className="parvus__controls",E.setAttribute("role","group"),E.setAttribute("aria-label",p.l10n.controlsLabel),f.appendChild(E),w=document.createElement("button"),w.className=p.closeButtonClass,w.setAttribute("type","button"),w.setAttribute("aria-label",p.l10n.closeButtonLabel),w.innerHTML=p.closeButtonIcon,E.appendChild(w),A=document.createElement("button"),A.className=p.previousButtonClass,A.setAttribute("type","button"),A.setAttribute("aria-label",p.l10n.previousButtonLabel),A.innerHTML=p.previousButtonIcon,E.appendChild(A),y=document.createElement("button"),y.className=p.nextButtonClass,y.setAttribute("type","button"),y.setAttribute("aria-label",p.l10n.nextButtonLabel),y.innerHTML=p.nextButtonIcon,E.appendChild(y),L=document.createElement("div"),L.className="parvus__counter",v.appendChild(L),b.appendChild(v),b.appendChild(f),g.appendChild(b),document.body.appendChild(g)),null!==p.gallerySelector){document.querySelectorAll(p.gallerySelector).forEach(((e,t)=>{const r=t;e.querySelectorAll(p.selector).forEach((e=>{e.setAttribute("data-group",`parvus-gallery-${r}`),X(e)}))}))}document.querySelectorAll(`${p.selector}:not(.parvus-trigger)`).forEach(X)};return Ae(),{init:Ae,open:D,close:P,select:U,previous:W,next:G,currentIndex:()=>c,add:X,remove:Y,destroy:()=>{if(!g)return;ve()&&P(),g.remove();document.querySelectorAll(".parvus-trigger").forEach(Y),Ee("destroy")},isOpen:ve,on:(e,t)=>{g&&g.addEventListener(e,t)},off:(e,t)=>{g&&g.removeEventListener(e,t)}}}}));
